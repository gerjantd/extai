import { z as z$1 } from 'zod';

var te=e=>{let o=new WeakSet;return JSON.stringify(e,(a,i)=>{if(typeof i=="object"&&i!==null){if(o.has(i))return;o.add(i);}return i})},ne=e=>e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:te(e),S="GatewayBaseError",V=class e extends Error{constructor({info:a,cause:i},l){super(`[${l!=null?l:S}]: ${a}
Message: ${ne(i)}`);this.name=S;this.info=a,this.cause=i,this.name=l!=null?l:S,Object.setPrototypeOf(this,new.target.prototype);}static isGatewayBaseError(a){return a instanceof e}toJSON(){return {name:this.name,info:this.info,cause:this.cause,message:this.message,stack:this.stack}}};var oe="system",ae="user",z="assistant",ie="tool",re=[oe,ae,z,ie],$=z$1.enum(re),se=[z],O=z$1.enum(se);var Z="image",v="base64",le=["png","jpeg","webp","gif"],pe=z$1.object({type:z$1.literal(v),base64:z$1.string(),media_type:z$1.enum(le)}),B="url",de=z$1.object({type:z$1.literal(B),url:z$1.string()}),ye=z$1.discriminatedUnion("type",[pe,de]),me=["low","medium","high","auto"],Te=z$1.enum(me),E=(e=z$1.undefined())=>z$1.object({modality:z$1.literal(Z),detail:Te,value:ye,metadata:e});var M="text",L=(e=z$1.undefined())=>z$1.object({modality:z$1.literal(M),value:z$1.string(),metadata:e}),u="partial-text",j=(e=z$1.undefined())=>z$1.object({modality:z$1.literal(u),value:z$1.string(),metadata:e});var g="tool-call",U=(e=z$1.undefined())=>z$1.object({modality:z$1.literal(g),index:z$1.number().int().nonnegative(),id:z$1.string().min(1),name:z$1.string().min(1),arguments:z$1.string(),metadata:e}),m="partial-tool-call",F=(e=z$1.undefined())=>z$1.object({modality:z$1.literal(m),index:z$1.number().int().nonnegative(),id:z$1.string().optional(),name:z$1.string().optional(),arguments:z$1.string().optional(),metadata:e});var h="tool-response",k=(e=z$1.undefined())=>z$1.object({modality:z$1.literal(h),index:z$1.number().int().nonnegative(),id:z$1.string().min(1),name:z$1.string().min(1),data:z$1.string(),metadata:e});var ue=[M,Z,g,h],He=z$1.enum(ue),G=(e=z$1.undefined(),o=z$1.undefined(),a=z$1.undefined(),i=z$1.undefined())=>z$1.discriminatedUnion("modality",[L(e),E(o),U(a),k(i)]),ce=[u,m],Ke=z$1.enum(ce),J=(e=z$1.undefined(),o=z$1.undefined())=>z$1.discriminatedUnion("modality",[j(e),F(o)]);var Ce="token",Ye=(e=z$1.undefined())=>z$1.object({modality:z$1.literal(Ce),value:z$1.array(z$1.number().int().nonnegative()),metadata:e});var b=(e=$,o=z$1.undefined(),a=z$1.undefined(),i=z$1.undefined(),l=z$1.undefined(),s=z$1.undefined())=>z$1.object({role:e,content:z$1.array(G(o,a,i,l)),metadata:s}),I=(e=O,o=z$1.undefined(),a=z$1.undefined(),i=z$1.undefined())=>z$1.object({role:e,partialContent:J(o,a),metadata:i});var yt=e=>L().parse({modality:M,value:e}),mt=(e,o,a,i)=>U().parse({modality:g,index:e,id:o,name:a,arguments:i}),Tt=(e,o)=>b().parse({role:e,content:[L().parse({modality:M,value:o})]}),ut=(e,o,a)=>b().parse({role:e,content:[E().parse({modality:Z,detail:a,value:{type:B,url:o}})]}),ct=(e,o,a)=>b().parse({role:e,content:[E().parse({modality:Z,detail:a,value:{type:v,base64:o}})]}),Ct=(e,o,a,i,l)=>b().parse({role:e,content:[U().parse({modality:g,index:o,id:a,name:i,arguments:l})]}),gt=(e,o,a,i,l)=>b().parse({role:e,content:[k().parse({modality:h,index:o,id:a,name:i,data:l})]}),ft=(e,o)=>I().parse({role:e,partialContent:j().parse({modality:u,value:o})}),Mt=(e,o,a,i,l)=>I().parse({role:e,partialContent:F().parse({modality:m,index:o,id:a,name:i,arguments:l})});var Ut=(e,o)=>{if(o.length===0)return e;let a=e,i=o[0].partialContent.modality,l={modality:u,value:""},s={modality:m,index:0,id:"",name:"",arguments:""};if(o.forEach(r=>{if(r.partialContent.modality===i){if(r.partialContent.modality===u)l.value+=r.partialContent.value;else if(r.partialContent.modality===m)if(s.index==r.partialContent.index)s.id+=r.partialContent.id||"",s.name+=r.partialContent.name||"",s.arguments+=r.partialContent.arguments||"";else {let P={modality:g,index:s.index,id:s.id,name:s.name,arguments:s.arguments};a.push({role:z,content:[P]}),s={modality:m,index:r.partialContent.index,id:r.partialContent.id||"",name:r.partialContent.name||"",arguments:r.partialContent.arguments||""};}}else {if(i===u){let P={modality:M,value:l.value};a.push({role:z,content:[P]}),l={modality:u,value:""};}else if(i===m){let P={modality:g,index:s.index,id:s.id,name:s.name,arguments:s.arguments};a.push({role:z,content:[P]}),s={modality:m,index:0,id:"",name:"",arguments:""};}i=r.partialContent.modality,r.partialContent.modality===u?l.value+=r.partialContent.value:r.partialContent.modality===m&&(s={modality:m,index:r.partialContent.index,id:r.partialContent.id||"",name:r.partialContent.name||"",arguments:r.partialContent.arguments||""});}}),i===u){let r={modality:M,value:l.value};a.push({role:z,content:[r]});}else if(i===m){let r={modality:g,index:s.index,id:s.id,name:s.name,arguments:s.arguments};a.push({role:z,content:[r]});}return a};var It=(e=z$1.record(z$1.string(),z$1.any()).optional())=>e;var ge=["object","array","number","string","boolean","enum"],N=z$1.enum(ge),fe=z$1.object({anyOf:z$1.array(z$1.any()).optional(),type:z$1.union([N,z$1.array(z$1.union([N,z$1.literal("null")]))]).optional(),default:z$1.any().optional(),title:z$1.string().optional(),description:z$1.string().max(4096).optional(),properties:z$1.record(z$1.any()).optional(),required:z$1.array(z$1.string()).optional(),minItems:z$1.number().int().min(0).optional(),maxItems:z$1.number().int().optional(),items:z$1.record(z$1.any()).optional(),enum:z$1.array(z$1.union([z$1.string(),z$1.number(),z$1.boolean(),z$1.null()])).optional(),minimum:z$1.number().optional(),maximum:z$1.number().optional(),minLength:z$1.number().int().min(0).optional(),maxLength:z$1.number().int().optional(),$ref:z$1.string().optional()}),Me=z$1.object({type:z$1.enum(["object"]),required:z$1.array(z$1.string()),$defs:z$1.record(z$1.any()).optional(),properties:z$1.record(fe),additionalProperties:z$1.literal(!1)}),kt=z$1.object({name:z$1.string().regex(/^[a-zA-Z0-9_]{1,64}$/).max(64),description:z$1.string().max(4096),strict:z$1.boolean().optional(),schema:Me}).optional();var _="function",Bt=["object","array","number","string","boolean","null"],ze=z$1.enum(["object","array","number","string","boolean","null"]),xe=z$1.object({anyOf:z$1.array(z$1.any()).optional(),type:ze.optional(),default:z$1.any().optional(),title:z$1.string().optional(),description:z$1.string().max(4096).optional(),properties:z$1.record(z$1.any()).optional(),required:z$1.array(z$1.string()).optional(),minItems:z$1.number().int().min(0).optional(),maxItems:z$1.number().int().optional(),items:z$1.record(z$1.any()).optional(),enum:z$1.array(z$1.union([z$1.string(),z$1.number(),z$1.boolean(),z$1.null()])).optional(),minimum:z$1.number().optional(),maximum:z$1.number().optional(),minLength:z$1.number().int().min(0).optional(),maxLength:z$1.number().int().optional()}),qt=z$1.object({type:z$1.enum(["object"]),title:z$1.string().optional(),$defs:z$1.record(z$1.any()).optional(),properties:z$1.record(xe).optional(),required:z$1.array(z$1.string()).optional()}),be=z$1.object({name:z$1.string().regex(/^[a-zA-Z0-9_]{1,64}$/).max(64),description:z$1.string().max(4096),parameters:z$1.any(),strict:z$1.boolean().optional()}),wt=["function"],Re=z$1.enum(["function"]),W=z$1.object({type:Re,definition:z$1.object({schema:be})});var Ze=[_],Ot=z$1.enum(Ze),Gt=(e=z$1.undefined())=>z$1.discriminatedUnion("type",[W.extend({metadata:e})]);var H="text",K="token",Pe=[H,K],_t=z$1.enum(Pe),Ee=z$1.array(z$1.string().min(1)),Le=z$1.array(z$1.array(z$1.number().int().nonnegative())),Wt=(e=z$1.undefined())=>z$1.discriminatedUnion("modality",[z$1.object({modality:z$1.literal(H),metadata:e,requests:Ee}),z$1.object({modality:z$1.literal(K),metadata:e,requests:Le})]);var Ue="float",he=z$1.object({index:z$1.number().int().nonnegative(),embedding:z$1.array(z$1.number())}),Ae="base64",Ie=z$1.object({index:z$1.number().int().nonnegative(),embedding:z$1.string().base64()}),Q=z$1.object({totalTokens:z$1.number().int().nonnegative()}),Qt=z$1.discriminatedUnion("encodingFormat",[z$1.object({encodingFormat:z$1.literal(Ue),embeddings:z$1.array(he),usage:Q.optional()}),z$1.object({encodingFormat:z$1.literal(Ae),embeddings:z$1.array(Ie),usage:Q.optional()})]);var Y=z$1.object({promptTokens:z$1.number().nonnegative(),completionTokens:z$1.number().nonnegative(),totalTokens:z$1.number().nonnegative()}),X=z$1.object({token:z$1.string(),logProb:z$1.number(),bytes:z$1.array(z$1.number().int()).nullable()}),je=X.extend({topLogProbs:z$1.array(X)}),ee=z$1.array(je),tn=z$1.object({messages:z$1.array(b()),usage:Y.optional(),logProbs:ee.optional()}),nn=z$1.object({partialMessages:z$1.array(I()),usage:Y.optional(),logProbs:ee.optional()});

export { z as AssistantRoleLiteral, Ie as Base64Embedding, Ae as Base64EmbeddingLiteral, le as Base64ImageContentMediaTypeLiterals, v as Base64ImageContentTypeLiteral, pe as Base64ImageContentValue, X as ChatBaseLogProb, je as ChatLogProb, ee as ChatLogProbs, tn as ChatResponse, Y as ChatUsage, It as Config, G as Content, _t as EmbeddingModalityEnum, Pe as EmbeddingModalityLiterals, Wt as EmbeddingRequests, Qt as EmbeddingResponse, H as EmbeddingTextModalityLiteral, K as EmbeddingTokenModalityLiteral, Q as EmbeddingsUsage, he as FloatEmbedding, Ue as FloatEmbeddingLiteral, be as Function, xe as FunctionParameter, Bt as FunctionParameterTypes, ze as FunctionParameterTypesLiteral, qt as FunctionParameters, W as FunctionTool, _ as FunctionToolLiteral, V as GatewayBaseError, E as ImageContent, me as ImageContentDetails, Te as ImageContentDetailsLiteral, Z as ImageModalityLiteral, b as Message, He as ModalityEnum, ue as ModalityLiterals, nn as PartialChatResponse, J as PartialContent, I as PartialMessage, Ke as PartialModalityEnum, ce as PartialModalityLiterals, O as PartialRoleEnum, se as PartialRoleLiterals, j as PartialTextContent, u as PartialTextModalityLiteral, F as PartialToolCallContent, m as PartialToolCallModalityLiteral, kt as ResponseSchema, fe as ResponseSchemaProperty, Me as ResponseSchemaStructure, ge as ResponseSchemaTypes, N as ResponseSchemaTypesLiteral, $ as RoleEnum, re as RoleLiterals, oe as SystemRoleLiteral, L as TextContent, Ee as TextEmbeddingRequests, M as TextModalityLiteral, Ye as TokenContent, Le as TokenEmbeddingRequests, Ce as TokenModalityLiteral, Gt as Tool, U as ToolCallContent, g as ToolCallModalityLiteral, Ot as ToolEnum, Ze as ToolLiterals, k as ToolResponseContent, h as ToolResponseModalityLiteral, ie as ToolRoleLiteral, wt as ToolTypes, Re as ToolTypesLiteral, B as UrlImageContentTypeLiteral, de as UrlImageContentValue, ae as UserRoleLiteral, ct as createBase64ImageMessage, ft as createPartialTextMessage, Mt as createPartialToolCallMessage, yt as createTextContent, Tt as createTextMessage, mt as createToolCallContent, Ct as createToolCallMessage, gt as createToolResponseMessage, ut as createUrlImageMessage, Ut as mergePartialMessages };
//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map