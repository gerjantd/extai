'use strict';

var zod = require('zod');

var te=e=>{let o=new WeakSet;return JSON.stringify(e,(a,i)=>{if(typeof i=="object"&&i!==null){if(o.has(i))return;o.add(i);}return i})},ne=e=>e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:te(e),S="GatewayBaseError",V=class e extends Error{constructor({info:a,cause:i},l){super(`[${l!=null?l:S}]: ${a}
Message: ${ne(i)}`);this.name=S;this.info=a,this.cause=i,this.name=l!=null?l:S,Object.setPrototypeOf(this,new.target.prototype);}static isGatewayBaseError(a){return a instanceof e}toJSON(){return {name:this.name,info:this.info,cause:this.cause,message:this.message,stack:this.stack}}};var oe="system",ae="user",z="assistant",ie="tool",re=[oe,ae,z,ie],$=zod.z.enum(re),se=[z],O=zod.z.enum(se);var Z="image",v="base64",le=["png","jpeg","webp","gif"],pe=zod.z.object({type:zod.z.literal(v),base64:zod.z.string(),media_type:zod.z.enum(le)}),B="url",de=zod.z.object({type:zod.z.literal(B),url:zod.z.string()}),ye=zod.z.discriminatedUnion("type",[pe,de]),me=["low","medium","high","auto"],Te=zod.z.enum(me),E=(e=zod.z.undefined())=>zod.z.object({modality:zod.z.literal(Z),detail:Te,value:ye,metadata:e});var M="text",L=(e=zod.z.undefined())=>zod.z.object({modality:zod.z.literal(M),value:zod.z.string(),metadata:e}),u="partial-text",j=(e=zod.z.undefined())=>zod.z.object({modality:zod.z.literal(u),value:zod.z.string(),metadata:e});var g="tool-call",U=(e=zod.z.undefined())=>zod.z.object({modality:zod.z.literal(g),index:zod.z.number().int().nonnegative(),id:zod.z.string().min(1),name:zod.z.string().min(1),arguments:zod.z.string(),metadata:e}),m="partial-tool-call",F=(e=zod.z.undefined())=>zod.z.object({modality:zod.z.literal(m),index:zod.z.number().int().nonnegative(),id:zod.z.string().optional(),name:zod.z.string().optional(),arguments:zod.z.string().optional(),metadata:e});var h="tool-response",k=(e=zod.z.undefined())=>zod.z.object({modality:zod.z.literal(h),index:zod.z.number().int().nonnegative(),id:zod.z.string().min(1),name:zod.z.string().min(1),data:zod.z.string(),metadata:e});var ue=[M,Z,g,h],He=zod.z.enum(ue),G=(e=zod.z.undefined(),o=zod.z.undefined(),a=zod.z.undefined(),i=zod.z.undefined())=>zod.z.discriminatedUnion("modality",[L(e),E(o),U(a),k(i)]),ce=[u,m],Ke=zod.z.enum(ce),J=(e=zod.z.undefined(),o=zod.z.undefined())=>zod.z.discriminatedUnion("modality",[j(e),F(o)]);var Ce="token",Ye=(e=zod.z.undefined())=>zod.z.object({modality:zod.z.literal(Ce),value:zod.z.array(zod.z.number().int().nonnegative()),metadata:e});var b=(e=$,o=zod.z.undefined(),a=zod.z.undefined(),i=zod.z.undefined(),l=zod.z.undefined(),s=zod.z.undefined())=>zod.z.object({role:e,content:zod.z.array(G(o,a,i,l)),metadata:s}),I=(e=O,o=zod.z.undefined(),a=zod.z.undefined(),i=zod.z.undefined())=>zod.z.object({role:e,partialContent:J(o,a),metadata:i});var yt=e=>L().parse({modality:M,value:e}),mt=(e,o,a,i)=>U().parse({modality:g,index:e,id:o,name:a,arguments:i}),Tt=(e,o)=>b().parse({role:e,content:[L().parse({modality:M,value:o})]}),ut=(e,o,a)=>b().parse({role:e,content:[E().parse({modality:Z,detail:a,value:{type:B,url:o}})]}),ct=(e,o,a)=>b().parse({role:e,content:[E().parse({modality:Z,detail:a,value:{type:v,base64:o}})]}),Ct=(e,o,a,i,l)=>b().parse({role:e,content:[U().parse({modality:g,index:o,id:a,name:i,arguments:l})]}),gt=(e,o,a,i,l)=>b().parse({role:e,content:[k().parse({modality:h,index:o,id:a,name:i,data:l})]}),ft=(e,o)=>I().parse({role:e,partialContent:j().parse({modality:u,value:o})}),Mt=(e,o,a,i,l)=>I().parse({role:e,partialContent:F().parse({modality:m,index:o,id:a,name:i,arguments:l})});var Ut=(e,o)=>{if(o.length===0)return e;let a=e,i=o[0].partialContent.modality,l={modality:u,value:""},s={modality:m,index:0,id:"",name:"",arguments:""};if(o.forEach(r=>{if(r.partialContent.modality===i){if(r.partialContent.modality===u)l.value+=r.partialContent.value;else if(r.partialContent.modality===m)if(s.index==r.partialContent.index)s.id+=r.partialContent.id||"",s.name+=r.partialContent.name||"",s.arguments+=r.partialContent.arguments||"";else {let P={modality:g,index:s.index,id:s.id,name:s.name,arguments:s.arguments};a.push({role:z,content:[P]}),s={modality:m,index:r.partialContent.index,id:r.partialContent.id||"",name:r.partialContent.name||"",arguments:r.partialContent.arguments||""};}}else {if(i===u){let P={modality:M,value:l.value};a.push({role:z,content:[P]}),l={modality:u,value:""};}else if(i===m){let P={modality:g,index:s.index,id:s.id,name:s.name,arguments:s.arguments};a.push({role:z,content:[P]}),s={modality:m,index:0,id:"",name:"",arguments:""};}i=r.partialContent.modality,r.partialContent.modality===u?l.value+=r.partialContent.value:r.partialContent.modality===m&&(s={modality:m,index:r.partialContent.index,id:r.partialContent.id||"",name:r.partialContent.name||"",arguments:r.partialContent.arguments||""});}}),i===u){let r={modality:M,value:l.value};a.push({role:z,content:[r]});}else if(i===m){let r={modality:g,index:s.index,id:s.id,name:s.name,arguments:s.arguments};a.push({role:z,content:[r]});}return a};var It=(e=zod.z.record(zod.z.string(),zod.z.any()).optional())=>e;var ge=["object","array","number","string","boolean","enum"],N=zod.z.enum(ge),fe=zod.z.object({anyOf:zod.z.array(zod.z.any()).optional(),type:zod.z.union([N,zod.z.array(zod.z.union([N,zod.z.literal("null")]))]).optional(),default:zod.z.any().optional(),title:zod.z.string().optional(),description:zod.z.string().max(4096).optional(),properties:zod.z.record(zod.z.any()).optional(),required:zod.z.array(zod.z.string()).optional(),minItems:zod.z.number().int().min(0).optional(),maxItems:zod.z.number().int().optional(),items:zod.z.record(zod.z.any()).optional(),enum:zod.z.array(zod.z.union([zod.z.string(),zod.z.number(),zod.z.boolean(),zod.z.null()])).optional(),minimum:zod.z.number().optional(),maximum:zod.z.number().optional(),minLength:zod.z.number().int().min(0).optional(),maxLength:zod.z.number().int().optional(),$ref:zod.z.string().optional()}),Me=zod.z.object({type:zod.z.enum(["object"]),required:zod.z.array(zod.z.string()),$defs:zod.z.record(zod.z.any()).optional(),properties:zod.z.record(fe),additionalProperties:zod.z.literal(!1)}),kt=zod.z.object({name:zod.z.string().regex(/^[a-zA-Z0-9_]{1,64}$/).max(64),description:zod.z.string().max(4096),strict:zod.z.boolean().optional(),schema:Me}).optional();var _="function",Bt=["object","array","number","string","boolean","null"],ze=zod.z.enum(["object","array","number","string","boolean","null"]),xe=zod.z.object({anyOf:zod.z.array(zod.z.any()).optional(),type:ze.optional(),default:zod.z.any().optional(),title:zod.z.string().optional(),description:zod.z.string().max(4096).optional(),properties:zod.z.record(zod.z.any()).optional(),required:zod.z.array(zod.z.string()).optional(),minItems:zod.z.number().int().min(0).optional(),maxItems:zod.z.number().int().optional(),items:zod.z.record(zod.z.any()).optional(),enum:zod.z.array(zod.z.union([zod.z.string(),zod.z.number(),zod.z.boolean(),zod.z.null()])).optional(),minimum:zod.z.number().optional(),maximum:zod.z.number().optional(),minLength:zod.z.number().int().min(0).optional(),maxLength:zod.z.number().int().optional()}),qt=zod.z.object({type:zod.z.enum(["object"]),title:zod.z.string().optional(),$defs:zod.z.record(zod.z.any()).optional(),properties:zod.z.record(xe).optional(),required:zod.z.array(zod.z.string()).optional()}),be=zod.z.object({name:zod.z.string().regex(/^[a-zA-Z0-9_]{1,64}$/).max(64),description:zod.z.string().max(4096),parameters:zod.z.any(),strict:zod.z.boolean().optional()}),wt=["function"],Re=zod.z.enum(["function"]),W=zod.z.object({type:Re,definition:zod.z.object({schema:be})});var Ze=[_],Ot=zod.z.enum(Ze),Gt=(e=zod.z.undefined())=>zod.z.discriminatedUnion("type",[W.extend({metadata:e})]);var H="text",K="token",Pe=[H,K],_t=zod.z.enum(Pe),Ee=zod.z.array(zod.z.string().min(1)),Le=zod.z.array(zod.z.array(zod.z.number().int().nonnegative())),Wt=(e=zod.z.undefined())=>zod.z.discriminatedUnion("modality",[zod.z.object({modality:zod.z.literal(H),metadata:e,requests:Ee}),zod.z.object({modality:zod.z.literal(K),metadata:e,requests:Le})]);var Ue="float",he=zod.z.object({index:zod.z.number().int().nonnegative(),embedding:zod.z.array(zod.z.number())}),Ae="base64",Ie=zod.z.object({index:zod.z.number().int().nonnegative(),embedding:zod.z.string().base64()}),Q=zod.z.object({totalTokens:zod.z.number().int().nonnegative()}),Qt=zod.z.discriminatedUnion("encodingFormat",[zod.z.object({encodingFormat:zod.z.literal(Ue),embeddings:zod.z.array(he),usage:Q.optional()}),zod.z.object({encodingFormat:zod.z.literal(Ae),embeddings:zod.z.array(Ie),usage:Q.optional()})]);var Y=zod.z.object({promptTokens:zod.z.number().nonnegative(),completionTokens:zod.z.number().nonnegative(),totalTokens:zod.z.number().nonnegative()}),X=zod.z.object({token:zod.z.string(),logProb:zod.z.number(),bytes:zod.z.array(zod.z.number().int()).nullable()}),je=X.extend({topLogProbs:zod.z.array(X)}),ee=zod.z.array(je),tn=zod.z.object({messages:zod.z.array(b()),usage:Y.optional(),logProbs:ee.optional()}),nn=zod.z.object({partialMessages:zod.z.array(I()),usage:Y.optional(),logProbs:ee.optional()});

exports.AssistantRoleLiteral = z;
exports.Base64Embedding = Ie;
exports.Base64EmbeddingLiteral = Ae;
exports.Base64ImageContentMediaTypeLiterals = le;
exports.Base64ImageContentTypeLiteral = v;
exports.Base64ImageContentValue = pe;
exports.ChatBaseLogProb = X;
exports.ChatLogProb = je;
exports.ChatLogProbs = ee;
exports.ChatResponse = tn;
exports.ChatUsage = Y;
exports.Config = It;
exports.Content = G;
exports.EmbeddingModalityEnum = _t;
exports.EmbeddingModalityLiterals = Pe;
exports.EmbeddingRequests = Wt;
exports.EmbeddingResponse = Qt;
exports.EmbeddingTextModalityLiteral = H;
exports.EmbeddingTokenModalityLiteral = K;
exports.EmbeddingsUsage = Q;
exports.FloatEmbedding = he;
exports.FloatEmbeddingLiteral = Ue;
exports.Function = be;
exports.FunctionParameter = xe;
exports.FunctionParameterTypes = Bt;
exports.FunctionParameterTypesLiteral = ze;
exports.FunctionParameters = qt;
exports.FunctionTool = W;
exports.FunctionToolLiteral = _;
exports.GatewayBaseError = V;
exports.ImageContent = E;
exports.ImageContentDetails = me;
exports.ImageContentDetailsLiteral = Te;
exports.ImageModalityLiteral = Z;
exports.Message = b;
exports.ModalityEnum = He;
exports.ModalityLiterals = ue;
exports.PartialChatResponse = nn;
exports.PartialContent = J;
exports.PartialMessage = I;
exports.PartialModalityEnum = Ke;
exports.PartialModalityLiterals = ce;
exports.PartialRoleEnum = O;
exports.PartialRoleLiterals = se;
exports.PartialTextContent = j;
exports.PartialTextModalityLiteral = u;
exports.PartialToolCallContent = F;
exports.PartialToolCallModalityLiteral = m;
exports.ResponseSchema = kt;
exports.ResponseSchemaProperty = fe;
exports.ResponseSchemaStructure = Me;
exports.ResponseSchemaTypes = ge;
exports.ResponseSchemaTypesLiteral = N;
exports.RoleEnum = $;
exports.RoleLiterals = re;
exports.SystemRoleLiteral = oe;
exports.TextContent = L;
exports.TextEmbeddingRequests = Ee;
exports.TextModalityLiteral = M;
exports.TokenContent = Ye;
exports.TokenEmbeddingRequests = Le;
exports.TokenModalityLiteral = Ce;
exports.Tool = Gt;
exports.ToolCallContent = U;
exports.ToolCallModalityLiteral = g;
exports.ToolEnum = Ot;
exports.ToolLiterals = Ze;
exports.ToolResponseContent = k;
exports.ToolResponseModalityLiteral = h;
exports.ToolRoleLiteral = ie;
exports.ToolTypes = wt;
exports.ToolTypesLiteral = Re;
exports.UrlImageContentTypeLiteral = B;
exports.UrlImageContentValue = de;
exports.UserRoleLiteral = ae;
exports.createBase64ImageMessage = ct;
exports.createPartialTextMessage = ft;
exports.createPartialToolCallMessage = Mt;
exports.createTextContent = yt;
exports.createTextMessage = Tt;
exports.createToolCallContent = mt;
exports.createToolCallMessage = Ct;
exports.createToolResponseMessage = gt;
exports.createUrlImageMessage = ut;
exports.mergePartialMessages = Ut;
//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map